type UserProxy @entity {
  id: ID!
  proxyAddress: Bytes!
  userAddress: Bytes!
}

enum PositionTransactionType {
  MINT
  TRANSFER
  CONFISCATE
}

type PositionTransaction @entity {
  id: ID!
  type: String!
  collateral: BigInt!
  normalDebt: BigInt!
  position: Position!
}

type Position @entity {
  id: ID!
  vault: Vault!
  tokenId: BigInt!
  user: Bytes!
  collateral: BigInt!
  maxCollateral: BigInt
  normalDebt: BigInt!
  maxNormalDebt: BigInt
  positionTransactions: [PositionTransaction!] @derivedFrom(field: "position")
}

type Vault @entity {
  id: ID!
  address: Bytes
  name: String
  underlyingAsset: String
  originator: String
  type: String
  positions: [Position!] @derivedFrom(field: "vault")
}
